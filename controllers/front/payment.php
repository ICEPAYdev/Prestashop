<?php/** * @package       ICEPAY Payment Module for Prestashop * @author        Ricardo Jacobs <ricardo.jacobs@icepay.com> * @copyright     (c) 2015 ICEPAY. All rights reserved. * @version       2.1.2, September 2015 * @license       BSD 2 License, see https://github.com/icepay/Prestashop/blob/master/LICENSE.md */class IcepayPaymentModuleFrontController extends ModuleFrontController{    public function initContent()    {        global $smarty;        $this->display_column_left = false;        $this->display_column_right = false;        parent::initContent();        $paymentMethodCode = $_GET['method'];        $activeShopID = (int)Context::getContext()->shop->id;        $storedPaymentMethod = Db::getInstance()->executeS("SELECT raw_pm_data FROM `{$this->module->dbRawData}` WHERE `shop_id` = {$activeShopID}");        $method = Icepay_Api_Webservice::getInstance()->singleMethod()->loadFromArray(unserialize($storedPaymentMethod[0]['raw_pm_data']));        $pMethod = $method->selectPaymentMethodByCode($paymentMethodCode);        $paymentMethod = Db::getInstance()->executeS("SELECT active, displayname, pm_code FROM `{$this->module->dbPmInfo}` WHERE pm_code = '{$paymentMethodCode}' AND `shop_id` = {$activeShopID}");        $issuerList = $pMethod->getIssuers();        $smarty->assign(array(            'issuerList' => $issuerList,            'paymentMethod' => $paymentMethodCode,            'displayname' => $paymentMethod[0]['displayname']        ));        $this->setTemplate('payment_execution.tpl');    }}